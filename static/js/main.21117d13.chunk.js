(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{14:function(t,e,n){},15:function(t,e,n){},17:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n(1),c=n.n(o),y=n(4),r=n.n(y),s=(n(14),n(15),n(5)),i=n(6),u=n(8),x=n(7),p={HEAD:"H",BODY:"B",NOT_DEFINED:"_",HIT:"X",AIR:" "},l=function(){for(var t=[],e=[],n=9;n>=0;n--){for(var a=[],o=0;o<10;o++)a.push({x:o,y:n,type:p.NOT_DEFINED});t.push(a)}var c=function(n){var a=!0,o=!1;n.getBlocks().forEach((function(t){t.forEach((function(t){(t.x<0||t.x>9||t.y<0||t.y>9)&&(t.type!==p.HEAD&&t.type!==p.BODY||(o=!0,a=!1))}))}));var c=!1;return t.forEach((function(t){t.forEach((function(t){n.getBlocks().forEach((function(e){e.forEach((function(e){t.x===e.x&&t.y===e.y&&(t.type!==p.HEAD&&t.type!==p.BODY||e.type!==p.HEAD&&e.type!==p.BODY||(c=!0,a=!1))}))}))}))})),!1===o&&!1===c&&(e.push(n),y()),a},y=function(){e.forEach((function(e){t.forEach((function(t){t.forEach((function(t){e.getBlocks().forEach((function(e){e.forEach((function(e){t.x===e.x&&t.y===e.y&&(e.type!==p.HEAD&&e.type!==p.BODY&&e.type!==p.HIT||(t.type=e.type))}))}))}))}))}))},r=function(n){e.forEach((function(e){e===n&&t.forEach((function(t){t.forEach((function(t){e.getBlocks().forEach((function(e){e.forEach((function(e){t.x===e.x&&t.y===e.y&&(t.type!==p.BODY&&t.type!==p.HEAD||e.type!==p.BODY&&e.type!==p.HEAD||(t.type=p.NOT_DEFINED))}))}))}))}))}));for(var a=0;a<e.length;a++)e[a].head===n.head&&e.splice(a,1)};return{boardSize:10,getBlocks:function(){return[].concat(t)},addPlane:c,removePlane:r,getPlanes:function(){return e},rotate:function(t){return r(t),t.rotate(),c(t)},hit:function(n){var a=n.x,o=n.y;e.forEach((function(t){t.hit({x:a,y:o})})),t.forEach((function(t){t.forEach((function(t){t.x==a&&t.y==o&&(t.type=p.HIT)}))})),y()}}},d=function(t){var e={x:t.x,y:t.y},n=!1,a=[[{x:e.x-1,y:e.y,type:p.NOT_DEFINED},{x:e.x,y:e.y,type:p.HEAD},{x:e.x+1,y:e.y,type:p.NOT_DEFINED},{x:e.x+2,y:e.y,type:p.NOT_DEFINED}],[{x:e.x-1,y:e.y+1,type:p.BODY},{x:e.x,y:e.y+1,type:p.BODY},{x:e.x+1,y:e.y+1,type:p.BODY},{x:e.x+2,y:e.y+1,type:p.NOT_DEFINED}],[{x:e.x-1,y:e.y+2,type:p.NOT_DEFINED},{x:e.x,y:e.y+2,type:p.BODY},{x:e.x+1,y:e.y+2,type:p.NOT_DEFINED},{x:e.x+2,y:e.y+2,type:p.NOT_DEFINED}],[{x:e.x-1,y:e.y+3,type:p.BODY},{x:e.x,y:e.y+3,type:p.BODY},{x:e.x+1,y:e.y+3,type:p.BODY},{x:e.x+2,y:e.y+3,type:p.NOT_DEFINED}]];return{head:e,getBlocks:function(){return a},hit:function(t){var o=t.x,c=t.y;n=!0;var y=!1;o==e.x&&c==e.y&&(y=!0),a.forEach((function(t){t.forEach((function(t){t.x==o&&t.y==c&&(t.type=p.HIT),y&&t.type!==p.NOT_DEFINED&&(t.type=p.HIT),t.type!==p.HEAD&&t.type!==p.BODY||(n=!1)}))}))},rotate:function(){for(var t=[[{x:0,y:0,type:0},{x:0,y:0,type:0},{x:0,y:0,type:0},{x:0,y:0,type:0}],[{x:0,y:0,type:0},{x:0,y:0,type:0},{x:0,y:0,type:0},{x:0,y:0,type:0}],[{x:0,y:0,type:0},{x:0,y:0,type:0},{x:0,y:0,type:0},{x:0,y:0,type:0}],[{x:0,y:0,type:0},{x:0,y:0,type:0},{x:0,y:0,type:0},{x:0,y:0,type:0}]],n=0;n<a.length;n++)for(var o=0;o<a.length;o++)t[n][o].x=a[n][o].x,t[n][o].y=a[n][o].y,t[n][o].type=a[a.length-o-1][n].type,t[n][o].type===p.HEAD&&(e={x:t[n][o].x,y:t[n][o].y});a.splice.apply(a,[0,a.length].concat(t))},getDead:function(){return n},blockType:p}};var f=function(t){var e="",n=t.block;switch(t.block.type){case"H":e="btn-primary","H";break;case"B":e="btn-secondary","B";break;case"_":e="btn-light","_";break;case"X":e="btn-danger","X"}return Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"button",className:"btn ".concat(e," m-0 p-0 ").concat(n.x," ").concat(n.y),style:{margin:"0xp",width:"1.5rem",height:"1.5rem"},"data-x":n.x,"data-y":n.y})})},h=n(3),g=n.n(h),E={selecting:1,moving:2,movingout:3,movingin:4,dropped:5};var D=function(t){Object(u.a)(n,t);var e=Object(x.a)(n);function n(t){var a;Object(s.a)(this,n),a=e.call(this,t),console.log("Load UI"),a.gameBoard=l(),a.state={status:E.selecting,gameBoardGrid:a.gameBoard.getBlocks(),selectedPlane:{}};var o=d({x:2,y:2});return a.gameBoard.addPlane(o),a}return Object(i.a)(n,[{key:"onBlockClick",value:function(t){}},{key:"mouseDown",value:function(t){var e=this;this.state.status!=E.selecting&&this.state.status!=E.dropped||(console.log("selected x:"+t.target.dataset.x+" y:"+t.target.dataset.y),console.log(t.target.dataset.x+" "+t.target.dataset.y),this.gameBoard.getPlanes().forEach((function(n){n.getBlocks().forEach((function(a){a.forEach((function(a){a.x!=t.target.dataset.x||a.y!=t.target.dataset.y||a.type!=p.HEAD&&a.type!=p.BODY||(e.setState({selectedPlane:n}),e.setState({status:E.moving}))}))}))})))}},{key:"mouseLeave",value:function(t){this.state.status!=E.moving&&this.state.status!=E.movingin||(console.log("leave x:"+t.target.dataset.x+" y:"+t.target.dataset.y),this.gameBoard.removePlane(this.state.selectedPlane),this.setState({gameBoardGrid:this.gameBoard.getBlocks()}),this.setState({status:E.movingout}))}},{key:"mouseEnter",value:function(t){if(this.state.status==E.movingout){console.log("enter x:"+t.target.dataset.x+" y:"+t.target.dataset.y);var e=d({x:parseInt(t.target.dataset.x),y:parseInt(t.target.dataset.y)});this.setState({selectedPlane:e}),this.gameBoard.addPlane(e),this.setState({gameBoardGrid:this.gameBoard.getBlocks()}),this.setState({status:E.movingin})}}},{key:"mouseUp",value:function(t){this.setState({status:E.dropped})}},{key:"render",value:function(){var t=this;return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("div",{className:"card",children:Object(a.jsx)("div",{className:"card-body",children:this.state.gameBoardGrid.map((function(e){return Object(a.jsx)("div",{className:"row p-0 m-0",children:e.map((function(e){return Object(a.jsx)("div",{className:"col-auto p-0 m-0",onClick:t.onBlockClick.bind(t),onMouseDown:t.mouseDown.bind(t),onMouseLeave:t.mouseLeave.bind(t),onMouseOver:t.mouseEnter.bind(t),onMouseUp:t.mouseUp.bind(t),children:Object(a.jsx)(f,{block:e})},g()())}))},g()())}))})})})})}}]),n}(o.Component);var v=function(){return Object(a.jsx)(D,{})},m=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(e){var n=e.getCLS,a=e.getFID,o=e.getFCP,c=e.getLCP,y=e.getTTFB;n(t),a(t),o(t),c(t),y(t)}))};r.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(v,{})}),document.getElementById("root")),m()}},[[17,1,2]]]);
//# sourceMappingURL=main.21117d13.chunk.js.map